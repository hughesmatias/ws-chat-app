(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{136:function(e,t,a){},137:function(e,t,a){e.exports=a(348)},142:function(e,t,a){},143:function(e,t,a){},348:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(35),i=a.n(r),o=(a(142),a(143),a(29)),c=a(5),l=a(24),u=a(54),m=Object(u.b)({initialState:{username:null},name:"auth",reducers:{login:function(e,t){var a=t.payload;localStorage.setItem("username",a),e.username=a},logout:function(e){localStorage.removeItem("username"),e.username=null}}}),g=m.actions,h=g.login,v=g.logout,d=m.reducer,p=a(51),f=a(52),b=a(55),E=a(53),S=a(7),N=a(70),y=a.n(N),j=a(134),w=a.n(j),k=a(135),O=a.n(k),M=[{name:"Matthew Russell",link:"https://twitter.com/mrussell247",avatar:"https://pbs.twimg.com/profile_images/517863945/mattsailing_400x400.jpg"},{name:"Julian Krispel-Samsel",link:"https://twitter.com/juliandoesstuff",avatar:"https://avatars2.githubusercontent.com/u/1188186?v=3&s=400"},{name:"Jyoti Puri",link:"https://twitter.com/jyopur",avatar:"https://avatars0.githubusercontent.com/u/2182307?v=3&s=400"},{name:"Max Stoiber",link:"https://twitter.com/mxstbr",avatar:"https://pbs.twimg.com/profile_images/763033229993574400/6frGyDyA_400x400.jpg"},{name:"Nik Graf",link:"https://twitter.com/nikgraf",avatar:"https://avatars0.githubusercontent.com/u/223045?v=3&s=400"},{name:"Pascal Brandt",link:"https://twitter.com/psbrandt",avatar:"https://pbs.twimg.com/profile_images/688487813025640448/E6O6I011_400x400.png"}],C=(a(344),a(345),a(136)),x=a.n(C),_=function(e){Object(b.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={editorState:S.EditorState.createEmpty(),suggestions:M},n.onChange=function(e){n.props.handleMessage(Object(S.convertToRaw)(e.getCurrentContent())),n.setState({editorState:e})},n.onSearchChange=function(e){var t=e.value;n.setState({suggestions:Object(N.defaultSuggestionsFilter)(t,M)})},n.onAddMention=function(){},n.focus=function(){n.props.toggleUser(!0),n.editor.focus()},n.focusout=function(){n.props.toggleUser(!1)},n.mentionPlugin=y()(),n.emojiPlugin=O()(),n}return Object(f.a)(a,[{key:"render",value:function(){var e=this,t=this.mentionPlugin.MentionSuggestions,a=this.emojiPlugin,n=a.EmojiSuggestions,r=a.EmojiSelect,i=[this.mentionPlugin,this.emojiPlugin];return s.a.createElement("div",{className:"columns is-mobile"},s.a.createElement("div",{className:"column is-4 is-offset-4"},s.a.createElement("div",{onFocus:this.focus,onBlur:this.focusout,className:"textarea"},s.a.createElement(w.a,{editorState:this.state.editorState,onChange:this.onChange,plugins:i,ref:function(t){e.editor=t}}),s.a.createElement(n,null),s.a.createElement(t,{onSearchChange:this.onSearchChange,suggestions:this.state.suggestions,onAddMention:this.onAddMention}),s.a.createElement("div",{className:x.a.options,style:{position:"absolute",bottom:0,right:0}},s.a.createElement(r,{className:"selectEmojiButton"})))))}}]),a}(n.Component),J=function(){return s.a.createElement("div",{class:"column is-4 is-offset-4"},s.a.createElement("nav",{className:"navbar"},s.a.createElement("div",{class:"container"},s.a.createElement("div",{id:"navbarMenuHeroA",class:"navbar-menu"},s.a.createElement("div",{class:"navbar-end"},localStorage.getItem("username")?s.a.createElement(o.b,{className:"navbar-item",to:"/logout"},"Logout"):s.a.createElement(o.b,{className:"navbar-item",to:"/"},"Login"),localStorage.getItem("username")&&s.a.createElement(o.b,{className:"navbar-item",to:"/chat"},"Chat"))))))},W=function(e){Object(b.a)(a,e);var t=Object(E.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(f.a)(a,[{key:"componentWillMount",value:function(){var e=this,t=new WebSocket("ws://localhost/ws/internal/");t.onmessage=function(t){var a=JSON.parse(t.data);switch(a.type){case"chat_message":var n=a.data;e.updateChat(n);break;case"writing_message":var s=a.data;e.updateWritingList(s)}},this.setState({ws:t,chat:[],usersWriting:[]})}},{key:"handleNewMessage",value:function(e){this.setState({message:JSON.stringify(e)})}},{key:"updateChat",value:function(e){var t=this.state.chat;t.push(e),this.setState({chat:t})}},{key:"updateWritingList",value:function(e){this.setState({usersWriting:e})}},{key:"toggleUser",value:function(e){var t={type:"writing_message",data:{user:this.props.username,add:e}};this.state.ws.send(JSON.stringify(t))}},{key:"sendMessage",value:function(){var e={type:"chat_message",data:{message:this.state.message,user:this.props.username}};this.state.ws.send(JSON.stringify(e)),this.setState({message:[]})}},{key:"renderMessageObj",value:function(e){return JSON.parse(e).blocks.map((function(e){return"".concat(e.text)}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.chat,n=t.usersWriting;return s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"columns is-mobile"},s.a.createElement(J,null)),s.a.createElement("div",{className:"columns is-mobile"},s.a.createElement("div",{className:"column is-4 is-offset-4",style:{height:"50vh",overflowY:"auto"}},a&&a.map((function(t,a){return s.a.createElement("article",{className:"message",key:a},s.a.createElement("div",{className:"message-body"},t.user," - ",e.renderMessageObj(t.message)))})))),s.a.createElement(_,{handleMessage:function(t){return e.handleNewMessage(t)},toggleUser:function(t){return e.toggleUser(t)},value:this.state.message}),s.a.createElement("div",{className:"columns is-mobile"},s.a.createElement("div",{className:"column is-4 is-offset-4"},n&&n.map((function(e,t){return s.a.createElement("span",{key:t},e)})),s.a.createElement("button",{className:"button is-primary",onClick:function(){return e.sendMessage()}},"Enviar mensaje"))))}}]),a}(n.Component),P=Object(l.b)((function(e){return{username:e.auth.username}}))(W),I=a(73),U=function(){var e=Object(l.c)(),t=Object(n.useState)(""),a=Object(I.a)(t,2),r=a[0],i=a[1],o=Object(n.useState)(!1),u=Object(I.a)(o,2),m=u[0],g=u[1];return s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"columns is-mobile"},s.a.createElement(J,null)),m&&s.a.createElement(c.a,{to:"/chat"}),s.a.createElement("div",{className:"columns is-mobile"},s.a.createElement("div",{class:"column is-4 is-offset-4"},s.a.createElement("form",{onSubmit:function(t){return t.preventDefault(),e(h(r)),void g(!0)}},s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Username"),s.a.createElement("div",{className:"control"},s.a.createElement("input",{className:"input",type:"text",placeholder:"Username",value:r,onChange:function(e){i(e.target.value)}})),s.a.createElement("input",{className:"button is-primary",type:"submit",value:"Chateaaar!",disabled:""==r}))))))};a(347);var A=function(){var e=Object(l.c)();return s.a.createElement(o.a,null,s.a.createElement(c.b,{path:"/",exact:!0,component:function(){return s.a.createElement(U,null)}}),s.a.createElement(c.b,{path:"/chat",exact:!0,component:function(){return localStorage.getItem("username")?s.a.createElement(P,null):s.a.createElement(c.a,{to:"/"})}}),s.a.createElement(c.b,{path:"/logout",exact:!0,component:function(){return e(v()),s.a.createElement(c.a,{to:"/"})}}))},B=Object(u.a)({reducer:{auth:d}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(l.a,{store:B},s.a.createElement(A,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[137,1,2]]]);
//# sourceMappingURL=main.2a742908.chunk.js.map